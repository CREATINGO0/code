/**
 * CS2911 Assn1, Room Booking Scenario
 * 3423267, Chad Luo
 */

import java.util.*;
import java.io.*;

public class RoomBookingSystem {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        String cmd;
        ArrayList<Room> roomList = new ArrayList();

        // main loop
        while( input.hasNext() ) {
            cmd = input.next();
            if( cmd.equals("#") ) cmd = input.nextLine(); // skip comment
            if( cmd.equals("Room") ) {

                int capacity = input.nextInt();
                String name = input.next();
                Room newRoom = new Room(capacity,name);
                roomList.add(newRoom);
                System.out.println("Room" + name + "assigned");

            } else if ( cmd.equals("Book") )  {

                String  user = input.next();
                int capacity = input.nextInt();
                int numweeks = input.nextInt();
                String month = input.next();
                int     date = input.nextInt();
                int     time = input.nextInt();
                int duration = input.nextInt();
                String title = input.next();

                Reservation newBook = new Reservation(user,title,capacity,
                    numweeks,month,date,time,duration);

                for(Room room : roomList){
                    if(room.hasCapacity(capacity) && room.hasSlots(newBook)){
                        room.append(newBook);
                        break;
                    }
                }

            } else if ( cmd.equals("Change") ) {

                String   user = input.next();
                String   room = input.next();
                int  numweeks = input.nextInt();
                String month1 = input.next();
                int     date1 = input.nextInt();
                int     time1 = input.nextInt();
                int  capacity = input.nextInt();
                String month2 = input.next();
                int     date2 = input.nextInt();
                int     time2 = input.nextInt();
                int duration2 = input.nextInt();
                String  title = input.next();

                Reservation newBook = new Reservation(user,title,capacity,
                    numweeks,month,date,time,duration);

                for(Room room : roomList){
                    for(Reservation existed : room.reserveList){
                        if(newBook.equals(room)){
                            existed.delete();
                            break;
                        }
                    }
                }

                for(Room room : roomList){
                    if(room.hasCapacity(capacity) && room.hasSlots(newBook)){
                        room.append(newBook);
                        break;
                    }
                }
                
            } else if ( cmd.equals("Delete") ) {

                String  user = input.next();
                String  room = input.next();
                int numweeks = input.nextInt();
                String month = input.next();
                int     date = input.nextInt();
                int     time = input.nextInt();

                Reservation newBook = new Reservation(user,title,capacity,
                    numweeks,month,date,time,duration);

                for(Room room : roomList){
                    for(Reservation existed : room.reserveList){
                        if(newBook.equals(room)){
                            existed.delete();
                            break;
                        }
                    }
                }

            } else if ( cmd.equals("Print") ) {

                String roomName = input.next();
                for(Room room : roomList) {
                    if(room.name.equals(roomName)){
                        room.print();
                    }
                }

            }
        }
    }
}
